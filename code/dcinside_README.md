# 🎮 디시인사이드 크롤러 + KoBERT 감성분석

디시인사이드 갤러리 게시글 및 댓글을 크롤링하고, KoBERT 기반 감성분석과 혐오표현 탐지를 수행하는 분석 도구입니다.

## ✨ 주요 기능

- **갤러리 크롤링**: 일반/마이너 갤러리 게시글 및 댓글 수집
- **키워드 검색**: 특정 키워드가 포함된 게시글만 수집
- **KoBERT 감성분석**: 딥러닝 기반 긍정/중립/부정 분류
- **혐오표현 탐지**: 다양한 유형의 혐오표현 자동 감지
- **텍스트 전처리**: 디시인사이드 특화 정규화 처리
- **시각화**: 종합 대시보드 및 워드클라우드 생성

## 📋 요구사항

- Google Colab 환경 (권장)
- Python 3.x
- GPU 사용 권장 (KoBERT 모델 추론 속도 향상)

## 🚀 사용 방법

### 1단계: 환경 설정
필요한 라이브러리를 설치합니다.

```python
!pip install requests beautifulsoup4 lxml
!pip install konlpy
!pip install pandas numpy matplotlib seaborn wordcloud
!pip install transformers torch sentencepiece
!pip install selenium
```

### 2단계: 갤러리 설정

```python
# 갤러리 ID 설정
GALLERY_ID = "politics"  # 갤러리 ID

# 마이너 갤러리 여부
IS_MINOR = False  # 마이너 갤러리면 True

# 검색 키워드 (선택사항)
KEYWORD = "검색어"  # 빈 문자열이면 전체 글

# 수집 설정
MAX_PAGES = 5           # 수집할 페이지 수
MAX_POSTS = 30          # 최대 게시글 수
MAX_COMMENTS = 50       # 게시글당 최대 댓글 수
```

### 3단계: 크롤링 실행
각 셀을 순차적으로 실행하여 데이터를 수집합니다.

### 4단계: 분석 결과 확인
감성분석, 혐오표현 탐지, 시각화 결과를 확인합니다.

## 🔗 주요 갤러리 ID 예시

| 갤러리 | ID |
|--------|-----|
| 주식 | `stock` |
| 비트코인 | `bitcoins` |
| 야구 | `baseball_new10` |
| 국내야구 | `kbaseball` |
| 축구 | `football_new6` |
| 정치 | `politics` |
| 인터넷방송 | `ib` |

## 📊 분석 파이프라인

```
갤러리 설정 → 게시글 목록 수집 → 댓글 수집 → 텍스트 전처리
                                              ↓
                              KoBERT 감성분석 ← 혐오표현 탐지
                                              ↓
                                        종합 분석 및 시각화
```

## 🤖 KoBERT 감성분석

Hugging Face의 사전학습된 한국어 감성분석 모델을 사용합니다.

| 감성 | 설명 |
|-----|------|
| 긍정 (Positive) | 긍정적인 감정 표현 |
| 중립 (Neutral) | 중립적인 표현 |
| 부정 (Negative) | 부정적인 감정 표현 |

## 🚫 혐오표현 탐지

다음 유형의 혐오표현을 자동으로 탐지합니다:

- 성별 혐오
- 지역 혐오
- 정치 혐오
- 외국인 혐오
- 일반 욕설
- 기타 비하 표현

## 📁 출력 파일

### 분석 결과 (`dcinside_{갤러리ID}_analysis.csv`)

| 컬럼 | 설명 |
|-----|------|
| text | 원본 텍스트 |
| cleaned_text | 전처리된 텍스트 |
| writer | 작성자 |
| sentiment | 감성 (긍정/중립/부정) |
| sentiment_confidence | 감성 분류 신뢰도 |
| has_hate | 혐오표현 포함 여부 |
| hate_types | 혐오표현 유형 |
| hate_words | 감지된 혐오 단어 |
| hate_score | 혐오 점수 |

## 📈 시각화 항목

1. **감성 분포**: 긍정/중립/부정 비율 파이 차트
2. **혐오 비율**: 혐오표현 포함 비율
3. **키워드 TOP 10**: 자주 등장하는 단어
4. **혐오 유형**: 유형별 혐오표현 분포
5. **텍스트 길이 분포**: 댓글 길이 히스토그램
6. **감성 vs 길이**: 감성 점수와 텍스트 길이 관계
7. **워드클라우드**: 키워드 시각화

## ⚙️ 텍스트 전처리

디시인사이드 특화 전처리를 수행합니다:

- 반복 문자 정규화 (ㅋㅋㅋㅋ → ㅋㅋ)
- 디시콘 제거
- URL, 특수문자 제거
- 공백 정규화
- 은어/비속어 처리

## ⚠️ 주의사항

- **교육/연구 목적으로만 사용**하세요
- 과도한 크롤링은 서버에 부담을 줍니다
- 적절한 딜레이를 유지하세요
- 개인정보 보호에 유의하세요
- 수집한 데이터의 2차 배포를 삼가세요

## 🔧 문제 해결

### KoBERT 모델 로드 실패
- GPU 메모리 부족 시 배치 크기를 줄이세요
- 네트워크 오류 시 모델을 다시 다운로드하세요

### 크롤링 차단
- 요청 간 딜레이를 늘려보세요
- User-Agent를 변경해보세요

### 한글 폰트 오류 (시각화)
- Colab에서 나눔폰트 설치 코드를 다시 실행하세요
- 런타임을 재시작하세요

## 📚 학습 정리

### 디시인사이드 URL 구조
- 일반 갤러리: `https://gall.dcinside.com/board/lists/?id=갤러리ID`
- 마이너 갤러리: `https://gall.dcinside.com/mgallery/board/lists/?id=갤러리ID`
- 댓글 API: `https://gall.dcinside.com/board/comment/`

### 크롤링 흐름
```
갤러리 ID 설정 → 게시글 목록 수집 → 댓글 API 호출 → 댓글 수집
```

## 📜 라이선스

이 프로젝트는 교육 및 연구 목적으로 제작되었습니다.
